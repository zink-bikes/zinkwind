<header
  class="color-scheme color-scheme--{{ section.settings.color_scheme }}"
>
  <div class="page-width">
    <div class="flex items-center justify-between gap-5 min-h-10 py-2">

      {% # Hamburger Menu Button - Left Position %}
      {% if section.settings.hamburger_position == 'left' %}
        <button
          type="button"
          data-menu-trigger
          aria-label="Menu"
          class="{% unless section.settings.enable_hamburger_all_devices %}md:hidden{% endunless %} transition hover:opacity-80 w-6 h-6 flex items-center justify-center
          {% if section.settings.logo_position == 'center' %}
            order-1
          {% else %}
            order-1
          {% endif %}
          "
        >
          <span class="w-6 h-6 [&>svg]:w-full [&>svg]:h-full [&>svg]:fill-current">
            {{ 'icon-menu.svg' | inline_asset_content }}
          </span>
        </button>
      {% endif %}

      <!-- Menu -->
      {% if section.settings.menu != blank %}
        <nav
          class="{% if section.settings.enable_hamburger_all_devices %}hidden{% else %}hidden md:block{% endif %}
          {% if section.settings.logo_position == 'center' %}
            order-1 flex-1
          {% else %}
            order-2
          {% endif %}
          "
        >
          <ul class="flex items-center gap-6 justify-start">
            {% for link in section.settings.menu.links %}
              <li>
                <a href="{{ link.url }}" class="transition hover:opacity-80">
                  {{ link.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </nav>
      {% endif %}

      <!-- Logo -->
      <div
        class="text-lg font-semibold flex justify-center
        {% if section.settings.logo_position == 'center' %}
          order-2 flex-1
        {% else %}
          order-1
        {% endif %}
        "
        style="max-width: {{ section.settings.logo_max_width }}px;"
      >
        <a href="{{ routes.root_url }}" class="transition hover:opacity-80 block">
          {% if section.settings.logo_svg != blank %}
            <div class="w-full h-full [&>svg]:h-[30px] [&>svg]:max-h-full svg-logo">
            {{ section.settings.logo_svg | raw }}
            <style>
              .svg-logo svg {
                max-width: {{ section.settings.logo_max_width }}px;
              }
            </style>
            </div>
          {% elsif section.settings.logo_image != blank %}
            {{ section.settings.logo_image | image_url: width: section.settings.logo_max_width | image_tag: alt: shop.name, class: 'mx-auto' }}
          {% else %}
            {{ shop.name }}
          {% endif %}
        </a>
      </div>

      <!-- Icons -->
      <div
        class="flex items-center gap-4 justify-end
        {% if section.settings.logo_position == 'center' %}
          order-3 flex-1
        {% else %}
          order-3
        {% endif %}
        "
      >
        {% if shop.customer_accounts_enabled %}
          <a
            href="{{ routes.account_url }}"
            aria-label="Account"
            class="transition hover:opacity-80 w-6 h-6 flex items-center justify-center"
          >
            <span class="w-6 h-6 [&>svg]:w-full [&>svg]:h-full [&>svg]:fill-current">
              {{ 'icon-account.svg' | inline_asset_content }}
            </span>
          </a>
        {% endif %}

        <button
          type="button"
          data-cart-trigger
          aria-label="Cart"
          class="relative transition hover:opacity-80 w-6 h-6 flex items-center justify-center"
          x-data="{
            get cart() {
              return $store.cart || { item_count: 0, items: [], loading: false, error: null, formatted_total: '$0.00' };
            }
          }"
        >
          <span class="w-5 h-5 [&>svg]:w-full [&>svg]:h-full [&>svg]:fill-current">
            {{ 'icon-cart.svg' | inline_asset_content }}
          </span>

          <span
            x-show="cart && cart.item_count > 0"
            class="absolute -top-2 -right-2 rounded-full text-xs font-medium px-1.5 py-0.5 bg-(--color-accent) text-(--color-foreground)"
            x-text="cart.item_count || 0"
          ></span>
        </button>

        {% # Hamburger Menu Button - Right Position %}
        {% if section.settings.hamburger_position == 'right' %}
          <button
            type="button"
            data-menu-trigger
            aria-label="Menu"
            class="{% unless section.settings.enable_hamburger_all_devices %}md:hidden{% endunless %} transition hover:opacity-80 w-6 h-6 flex items-center justify-center"
          >
            <span class="w-6 h-6 [&>svg]:w-full [&>svg]:h-full [&>svg]:fill-current">
              {{ 'icon-menu.svg' | inline_asset_content }}
            </span>
          </button>
        {% endif %}
      </div>
    </div>
  </div>
</header>

{% # Render Mobile Menu %}
{% render 'mobile-menu', section: section %}

{% schema %}
{
  "name": "Header",
  "class": "sticky top-0 z-50",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Main menu"
    },
    {
      "type": "header",
      "content": "Mobile Menu Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_hamburger_all_devices",
      "label": "Use hamburger menu on all devices",
      "default": false,
      "info": "Hide desktop navigation and show hamburger menu on all screen sizes"
    },
    {
      "type": "select",
      "id": "hamburger_position",
      "label": "Hamburger button position",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right (with icons)" }
      ]
    },
    {
      "type": "select",
      "id": "mobile_menu_slide_direction",
      "label": "Menu slide direction",
      "default": "from-left",
      "options": [
        { "value": "from-left", "label": "Slide from left" },
        { "value": "from-right", "label": "Slide from right" }
      ]
    },
    {
      "type": "header",
      "content": "Logo Settings"
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo position",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo image"
    },
    {
      "type": "html",
      "id": "logo_svg",
      "label": "SVG logo (optional)"
    },
    {
      "type": "range",
      "id": "logo_max_width",
      "label": "Logo max width (px)",
      "default": 180,
      "min": 40,
      "max": 400,
      "step": 10
    },
    {
      "type": "header",
      "content": "Style Settings"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    }
  ]
}
{% endschema %}
